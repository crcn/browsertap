<!DOCTYPE html>
<html>
  <head>
    <title></title>
  </head>
  <body>
    <div id="app"></div>
    <script>
      require("babel/register")();
      var config         = JSON.parse(decodeURIComponent(location.hash.substr(1)));
      var React          = require("react");
      var ReactDOM       = require("react-dom");
      var createIPCBus   = require("desktop-client/bus/drivers/ipc");
      var mesh           = require("mesh");
      var CommandsBus    = require("common/mesh/bus/commands");
      var componentClass = require("desktop-client/components/" + config.componentName);

      document.title = config.title || "";
      ReactDOM.render(React.createElement(componentClass, config), document.getElementById("app"));


      var bus = createIPCBus(require("ipc"), new CommandsBus({
        ping: function(operation) {
          return new mesh.BufferedResponse(void 0, "pong!");
        }
      }));

    </script>
  </body>
</html>
