var logger = require('mesh-winston').loggers.get('fig');

exports.plugin = function(router)
{


    return {

        load: function(path, callback) {

            logger.debug('loading template: ' + path);


            var hash = (typeof mesh != 'undefined' ? mesh.buildId : null) || Date.now();

             
            var ops = {
                url: path + '?'+ hash,
                dataType: 'text/plain',
                success: function(content)
                {
                    callback(null, content);
                },
                error: function(e)
                {
                    callback(null, e.responseText);
                }
            }
            
            $.ajax(ops);
        }
    }
}