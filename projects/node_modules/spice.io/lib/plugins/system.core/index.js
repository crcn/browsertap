
var exec = require('child_process').exec;

exports.plugin = function(router, params) {
	
	router.on({   

		'pull load/*': function(req, res, mw) {
			exec('hostname', function(err, hostname) {
				var hn = hostname.replace('\n','');
				router.on('pull hostname', function(req, res) {
					res.end(hn);
				});
				router.push('hostname', hn);
				mw.next();
			});	
		},

    	'push hostname': function(hostname)
	    {   
	        process.env.HOST_NAME = hostname;
	    }
	});
}