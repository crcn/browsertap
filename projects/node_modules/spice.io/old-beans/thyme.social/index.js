var vine = require('vine');


exports.plugin = function(router)
{
	router.on({
		
		/**
		 * before we redirect to the thyme route, which is hosted on another server
		 */

		'pull social/validate/login -> before/my/thyme': function()
		{

			//the key is the users profile id...
			this.data.key = this.profile._id;

			if(!this.next()) return vine.result('success').end();
		},

		/**
		 * IF thyme is not available, then we error.
		 */

		'pull after/my/thyme': function()
		{
			return vine.error('Unable to fetch schedule').end();
		},

		/**
		 * lists all the scheduled items for the logged in user
		 */

		'pull -http before/my/thyme -> thymes -> after/my/thyme -> my/thymes': function(){},

		/**
		 * updates a scheduled item by the user
		 */

		'pull -http before/my/thyme -> update/thyme   -> after/my/thyme -> (update/my/thyme or update/my/thymechedule/:id)':  function(){},

		/** 
		 * removes a scheduled item by the user
		 */

		'pull -http before/my/thyme -> remove/thyme   -> after/my/thyme -> (remove/my/thyme or remove/my/thyme/:id)': function(){}
	});
}