var OAuthHandler = require('psk/auth').OAuthHandler,
	Twitter = require('./twitter').Twitter;

var TwitterAuthHandler = OAuthHandler.extend({
	name: 'twitter',
	'override __construct': function (appParams)
	{
		// this.loginUrl = 'https://twitter.com/oauth/authorize';
		// this.authUrl = 'https://twitter.com/oauth/authenticate';
		this._super('https://twitter.com/oauth/authorize',
		'https://api.twitter.com/oauth/request_token',
		'https://api.twitter.com/oauth/access_token',
		appParams,
		'1.0',
		null,
		'HMAC-SHA1');
	}, 
	'getAccountInfo': function (secret, callback)
	{
		
		var t = new Twitter(this);
		
		
		t.verifyCredentials({secret:secret}, function(data)
		{
			callback(null, data.id, {}, data.screen_name)
		})
		// callback(null, result.user_id, {}, result.screen_name);
	}
});

exports.TwitterAuthHandler = TwitterAuthHandler;