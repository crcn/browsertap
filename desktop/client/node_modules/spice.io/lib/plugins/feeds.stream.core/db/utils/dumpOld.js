module.exports = function(model, name, ageInDays) {

	if(!ageInDays) return;
	
	var ageInMs = 1000 * 60 * 60 * 24 * ageInDays;


	function dumpOld() {
			
		var deleteQuery = {
			createdAt: {
				$lt: new Date(Date.now() - ageInMs)
			}
		}

		/*model.find(deleteQuery).count(function(err, num) {

			logger.info(sprintf('deleting %s %s which are older than %d days', num, name, ageInDays));

			model.remove(deleteQuery, function(){});
		})*/
		
		model.remove(deleteQuery, function(){});	
		
		//dump every 24 hours
		setTimeout(dumpOld, 1000 * 60 * 60 * 24);
	}

	dumpOld();

}